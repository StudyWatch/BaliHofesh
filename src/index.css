@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===============================
   THEME TOKENS (שימושי ל-shadcn/ui)
==================================*/
:root {
  /* Base palette (Light) */
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --primary: 240 83% 60%;
  --primary-foreground: 0 0% 100%;
  --secondary: 221 30% 92%;
  --secondary-foreground: 222 47% 11%;
  --muted: 220 14% 96%;
  --muted-foreground: 215 16% 45%;
  --accent: 240 33% 95%;
  --accent-foreground: 222 47% 11%;
  --destructive: 0 85% 60%;
  --destructive-foreground: 0 0% 100%;
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 240 83% 60%;

  /* Gradients */
  --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --gradient-exam: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --gradient-assignment: linear-gradient(135deg, #2563eb 0%, #60a5fa 100%);
  --gradient-institution: linear-gradient(135deg, #fa709a 0%, #fee140 100%);

  /* Elevations */
  --elev-1: 0 1px 3px rgba(16, 24, 40, 0.06), 0 1px 2px rgba(16, 24, 40, 0.04);
  --elev-2: 0 8px 20px rgba(2, 6, 23, 0.08);

  /* Misc */
  --radius-lg: 1.25rem;
  --radius-xl: 1.5rem;
  --radius-2xl: 1.75rem;
}

.dark {
  --background: 220 18% 12%;
  --foreground: 210 20% 90%;
  --card: 220 15% 16%;
  --card-foreground: 0 0% 100%;
  --popover: 220 15% 16%;
  --popover-foreground: 0 0% 100%;
  --primary: 240 90% 66%;
  --primary-foreground: 0 0% 100%;
  --secondary: 232 21% 18%;
  --secondary-foreground: 210 20% 90%;
  --muted: 220 15% 20%;
  --muted-foreground: 220 10% 65%;
  --accent: 240 30% 25%;
  --accent-foreground: 240 40% 90%;
  --destructive: 0 85% 56%;
  --destructive-foreground: 0 0% 100%;
  --border: 220 20% 30%;
  --input: 220 20% 30%;
  --ring: 240 90% 66%;
}

/* ===============================
   BASE & RESET
==================================*/
html {
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  scroll-behavior: smooth;
}
@layer base {
  * { @apply border-border; }
  body { @apply bg-background text-foreground; }
}
:where(button, a, [role="button"]) { -webkit-tap-highlight-color: transparent; }

/* Hide horizontal scrollbar helpers */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Gradients helpers */
.bg-gradient-primary { background: var(--gradient-primary);}
.bg-gradient-exam { background: var(--gradient-exam);}
.bg-gradient-institution { background: var(--gradient-institution);}

/* Animations */
@keyframes gradient-x {
  0%,100%{background-size:200% 200%;background-position:left center;}
  50%{background-size:200% 200%;background-position:right center;}
}
.animate-gradient-x { background-size:200% 200%; animation: gradient-x 15s ease infinite; }
@keyframes fade-in { from { opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);} }
@keyframes slide-up { from { opacity: 0; transform: translateY(30px);} to { opacity: 1; transform: translateY(0);} }
.animate-fade-in { animation: fade-in .6s ease-out both; }
.animate-slide-up { animation: slide-up .6s ease-out both; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
.delay-400 { animation-delay: 400ms; }
.delay-500 { animation-delay: 500ms; }

/* Line clamp utilities */
.line-clamp-1 { display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient:vertical; overflow:hidden;}
.line-clamp-2 { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;}
.line-clamp-3 { display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;}

/* ===============================
   BUTTONS / BADGES (fix overflow)
==================================*/
button, .btn, .button, .shadcn-button, .ui-button {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}
button:focus-visible { outline: none; box-shadow: 0 0 0 3px hsl(var(--ring) / .35); }
.btn-pill { border-radius: 9999px; }

.badge, .ui-badge { border: 0; font-weight: 700; }

/* ===============================
   TABS (shadcn/ui)
==================================*/
[role="tablist"] {
  border-radius: 12px;
  background: hsl(var(--muted));
  padding: 6px;
  box-shadow: var(--elev-1);
}
[role="tab"] {
  border-radius: 10px !important;
  font-weight: 600;
  transition: background .18s, color .18s, box-shadow .18s, transform .06s;
}
[role="tab"][data-state="active"] {
  background: hsl(var(--card));
  color: hsl(var(--primary));
  box-shadow: 0 6px 16px rgba(31,41,55,.12);
  transform: translateY(-1px);
}

/* ===============================
   CARDS / HEADER / AVATAR
==================================*/
.card-elev { box-shadow: var(--elev-2); border-radius: var(--radius-2xl); }
.header-sticky {
  position: sticky; top: 0; z-index: 20;
  backdrop-filter: saturate(1.1) blur(8px);
  background: color-mix(in oklab, hsl(var(--background)) 80%, transparent);
}

.avatar-ring {
  position: relative;
}
.avatar-ring::after {
  content:''; position:absolute; inset:-4px;
  border-radius:9999px; pointer-events:none;
  background: conic-gradient(from 180deg at 50% 50%, #7c3aed, #22c55e, #3b82f6, #f59e0b, #7c3aed);
  filter: blur(10px); opacity:.35;
}

/* ===============================
   PROFILE POLISH
   (עובד בלי שינוי JSX – מבוסס מיקוד גלובלי)
==================================*/
.profile-hero {
  border-radius: var(--radius-2xl);
  background: linear-gradient(135deg, rgba(79, 70, 229, .95), rgba(147, 51, 234, .92));
  color: #fff;
  box-shadow: 0 20px 50px rgba(79, 70, 229, .25);
}

.stat-card {
  border-radius: 18px;
  background: hsl(var(--card));
  box-shadow: 0 12px 30px rgba(99,102,241,.12);
}
.stat-card .icon {
  display:inline-flex; align-items:center; justify-content:center;
  padding: .9rem; border-radius: 9999px; font-weight:900;
}

/* Quick action buttons grid – מונע גלישה בטקסט */
.quick-actions {
  display:grid; gap:.75rem;
  grid-template-columns: repeat(2, minmax(0,1fr));
}
@media (min-width: 640px) {
  .quick-actions { grid-template-columns: repeat(4, minmax(0,1fr)); }
}
.quick-actions .button, .quick-actions button {
  padding-block: .75rem !important;
  border-radius: 14px !important;
  box-shadow: 0 8px 18px rgba(0,0,0,.09);
}

/* Messages preview – טקסט קצר ואלגנטי */
.message-item { border-radius: 12px; transition: background .16s, box-shadow .16s; }
.message-item:hover { background: hsl(var(--muted)); box-shadow: 0 10px 22px rgba(0,0,0,.06); }

/* ===============================
   FULLCALENDAR – THEME
==================================*/
.calendar-wrapper { overflow-x:auto; }

/* Toolbar */
.fc .fc-toolbar-title { font-size: 1.05rem; font-weight: 800; letter-spacing: .2px; }
.fc .fc-button {
  border-radius: 8px !important;
  padding: .45rem .75rem !important;
  font-size: .85rem !important;
  height: 34px !important;
}
.fc .fc-button-group { gap: .25rem; }
.fc .fc-theme-standard td, .fc .fc-theme-standard th { border-color: rgba(2,6,23,.08) !important; }
.dark .fc .fc-theme-standard td, .dark .fc .fc-theme-standard th { border-color: rgba(255,255,255,.08) !important; }

/* Header cells */
.fc .fc-scrollgrid-section-header > th {
  background: #f8fafc !important;
  border-bottom: 2px solid #e0e7ef !important;
}
.dark .fc .fc-scrollgrid-section-header > th {
  background: #0f0f10 !important;
  border-bottom: 1px solid rgba(255,255,255,.08) !important;
}

/* Today highlight */
.fc .fc-daygrid-day.fc-day-today .fc-daygrid-day-frame { background: rgba(255,225,167,.35) !important; }
.dark .fc .fc-daygrid-day.fc-day-today .fc-daygrid-day-frame { background: rgba(255,225,167,.18) !important; }

/* Events – כפתור יפה עם גרדיאנט ומסגרת קורס */
.fc .fc-event {
  border-radius: 12px !important;
  font-size: 14px !important;
  font-weight: 800 !important;
  border-width: 2.5px !important;
  margin: 3px 0 !important;
  min-height: 28px !important;
  transition: box-shadow .15s, transform .06s;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  overflow: hidden;
  padding: 5px 12px !important;
  box-shadow: 0 3px 16px rgba(24,24,27,.06) !important;
}
.fc .fc-event:hover { box-shadow: 0 8px 26px rgba(24,24,27,.14) !important; transform: translateY(-1px) }

/* Time-grid slots */
.fc-timegrid-event { border-radius: 12px !important; background: #eef2ff !important; color: #111 !important; }
.fc-timegrid-slot { background: #f8fafc !important; border-top: 1px solid #e0e7ef !important; }

/* List view */
.fc-list, .fc-list-sticky, .fc-list-table { border-radius: 14px; overflow:hidden; }
.fc .fc-list-day-cushion { background: hsl(var(--muted)); font-weight: 800; }

/* Mobile compact */
@media (max-width: 640px) {
  .fc .fc-toolbar { flex-direction: column; align-items: center; gap: .25rem; }
  .fc .fc-toolbar-title { font-size: .95rem !important; font-weight: 800; }
  .fc .fc-button { font-size: .75rem !important; padding: .25rem .5rem !important; height: 28px !important; }
  .fc .fc-button-group { flex-wrap: wrap; justify-content: center; gap: .2rem; }
  .fc .fc-daygrid-day-number { font-size: .8rem; }
  .fc .fc-event { font-size: 11.5px !important; padding: 2px 6px !important; min-height: 22px !important; border-radius: 10px !important; }
  .fc-list-table td, .fc-list-table th { font-size: 12px !important; padding: 4px 6px !important; }
  .fc-list-event-title { font-size: 13px !important; font-weight: 700; }
}

/* ===============================
   TIPPY (tooltips) – אחיד עם המותג
==================================*/
.tippy-box[data-theme~='light-border']{
  background: #fff;
  color: #0f172a;
  border: 1px solid #e5e7eb;
  box-shadow: 0 10px 30px rgba(2,6,23,.12);
  border-radius: 12px;
}
.tippy-box[data-theme~='light-border'] .tippy-content{ padding: 10px 12px; }
.dark .tippy-box[data-theme~='light-border']{
  background: #0f1220;
  color: #e5e7eb;
  border-color: #2b2f45;
  box-shadow: 0 10px 30px rgba(23,23,33,.35);
}

/* ===============================
   ACCESSIBILITY WIDGET
==================================*/
.accessibility-button {
  position: fixed; bottom: 20px; left: 20px;
  width: 50px; height: 50px; z-index: 1000;
  background: #2563eb; color: #fff; border: none; border-radius: 50%;
  font-size: 24px; cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
  transition: all .3s ease; display:flex; align-items:center; justify-content:center;
}
.accessibility-button:hover { background:#1d4ed8; transform: scale(1.09); box-shadow: 0 6px 20px rgba(0,0,0,.23); }
.accessibility-button:focus { outline: 3px solid #93c5fd; outline-offset:2px; }

.dialog-content-improved,
.dialog-content,
.modal-content,
.accessibility-dialog {
  background: #f6f7fa !important;
  color: #1a202c !important;
  border-radius: 22px !important;
  box-shadow: 0 24px 48px -12px rgba(60,60,100,0.18) !important;
  border: 2px solid #e5e7eb !important;
  opacity: 1 !important;
  direction: rtl; min-width: 340px;
}
.dialog-title, .modal-title, .popover-title, .menu-title {
  color:#22223b !important; font-weight:700; font-size:2rem !important; background:none !important; text-align:right; direction:rtl;
}
.card-content, .CardContent { background:#fff !important; border-radius:14px; box-shadow:0 2px 12px rgba(100,120,220,.08); margin-bottom:1.2rem; }
.reset-accessibility-btn { margin-top:1.5rem; font-weight:700; font-size:1.09rem; border-radius:8px; }
[dir='rtl'] .accessibility-dialog, [dir='rtl'] .DialogContent { direction: rtl; text-align: right; }
.accessibility-dialog label { color:#1a202c !important; font-weight:500; font-size:1.04rem; }
.accessibility-dialog .flex.items-center { padding:.35rem .4rem; border-radius:10px; margin-bottom:.2rem; transition: background .17s; background:transparent; }
.accessibility-dialog .flex.items-center:hover { background:#e9edfb !important; }
.accessibility-dialog .switch:focus-visible { outline:2px solid #93c5fd; }
.accessibility-dialog .text-gray-600, .accessibility-dialog .text-sm { color:#596088 !important; }

/* Switch (RTL/LTR aware) */
.switch {
  border: 2px solid #b7bbcf; background: #e8eafd; width: 44px; height: 24px; margin-inline-end: 8px;
  transition: all .18s; position: relative; display:inline-flex; align-items:center; cursor:pointer;
}
.switch > span, .switch > .radix-switch-thumb {
  position:absolute; left:4px; top:4px; width:16px; height:16px; border-radius:9999px;
  transition: transform .22s cubic-bezier(.4,0,.2,1), background .22s, box-shadow .18s;
  background:#24243a !important; box-shadow:0 2px 8px rgba(70,70,90,.12); pointer-events:none;
}
.switch[data-state="checked"] { background:#2563eb !important; border-color:#2563eb !important; }
.switch[data-state="checked"] > span, .switch[data-state="checked"] > .radix-switch-thumb { background:#fff !important; box-shadow:0 2px 10px rgba(37,99,235,.18); transform: translateX(20px); }
[dir="rtl"] .switch[data-state="checked"] > span, [dir="rtl"] .switch[data-state="checked"] > .radix-switch-thumb { transform: translateX(-20px); }

.dark .switch { background:#222943; border-color:#4657b2; }
.dark .switch > span, .dark .switch > .radix-switch-thumb { background:#bfc7ee !important; box-shadow:0 2px 10px #22316d11; }
.dark .switch[data-state="checked"] { background:#425fff !important; border-color:#425fff !important; }
.dark .switch[data-state="checked"] > span, .dark .switch[data-state="checked"] > .radix-switch-thumb { background:#fff !important; box-shadow:0 2px 10px #6aa2ff33; transform: translateX(20px); }
[dir="rtl"].dark .switch[data-state="checked"] > span, [dir="rtl"].dark .switch[data-state="checked"] > .radix-switch-thumb { transform: translateX(-20px); }

/* Mobile dialog fixes */
@media (max-width:700px){
  .dialog-content-improved, .dialog-content, .modal-content, .accessibility-dialog {
    border-radius:10px !important; padding:.8rem !important; font-size:.98rem; min-width:unset !important;
  }
  .dialog-title { font-size:1.25rem !important; }
}

/* ===============================
   STORE / WIDGET EXAMPLE (כמו שהיה)
==================================*/
@keyframes store-shimmer { 0%{ transform: translateX(-100%);} 100%{ transform: translateX(100%);} }
.animate-store-shimmer::before{
  content:''; position:absolute; inset:0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.4), transparent);
  animation: store-shimmer 2s ease-in-out infinite;
}
.semester-tabs { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border-radius:12px; padding:8px; margin-bottom:24px; }
.semester-tab { transition: all .3s ease; border-radius:8px; position:relative; overflow:hidden; }
.semester-tab.active { background:#fff; box-shadow: 0 2px 8px rgba(0,0,0,.1); transform: translateY(-1px); }
.semester-tab.active::before { content:''; position:absolute; inset-inline:0; bottom:0; height:2px; background: linear-gradient(90deg, #3b82f6, #1d4ed8); }

.assignments-widget{
  width:100%; max-width:400px; min-width:260px; margin:40px auto 0; background:#fff; border-radius:18px;
  box-shadow:0 6px 32px rgba(52,100,220,.10); padding:2.2rem 1.2rem 3.5rem; position:relative; display:flex; flex-direction:column; align-items:center; gap:1.3rem;
}
@media (max-width:700px){ .assignments-widget{ max-width:97vw; padding:1.4rem .4rem 2.7rem; } }
.assignments-widget .add-btn-fab{ position:absolute; bottom:1.15rem; left:50%; transform:translateX(-50%); background:#2563eb; color:#fff; border-radius:50%; width:44px; height:44px; font-size:2em; box-shadow:0 4px 20px rgba(52,100,220,.15); display:flex; align-items:center; justify-content:center; cursor:pointer; border:none; transition: background .15s, transform .12s; z-index:3;}
.assignments-widget .add-btn-fab:hover{ background:#174ea6; transform:translateX(-50%) scale(1.09); }
.assignments-widget .no-assignments, .assignments-widget h3, .assignments-widget p { text-align:center; }

/* ===============================
   ACCESSIBILITY MODIFIERS ON <main>
==================================*/
main.accessibility-high-contrast { filter: contrast(150%) !important; }
main.accessibility-black-white { filter: grayscale(100%) !important; }
main.accessibility-highlight-links a { background: yellow !important; color:black !important; font-weight: bold !important; }
main.accessibility-readable-font { font-family: 'Arial', sans-serif !important; }
main.accessibility-pause-animations * { animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important; }
main.accessibility-stop-flashing * { animation: none !important; }
main.accessibility-dark-mode { filter: invert(1) hue-rotate(180deg) !important; }
main.accessibility-dark-mode img, main.accessibility-dark-mode video { filter: invert(1) hue-rotate(180deg) !important; }

/* ===============================
   DARK – GLASS + NEON (מעודכן עדין)
==================================*/
html.dark, body.dark {
  background: linear-gradient(135deg, #1e1b38 0%, #31216b 70%, #2a2245 100%) fixed !important;
  color: #e0e6f7;
  min-height: 100vh;
  font-family: "Inter", "Heebo", "Rubik", Arial, sans-serif;
}

/* Cards */
.dark .rounded-2xl, .dark .rounded-3xl, .dark .bg-white, .dark .bg-white\/90, .dark .bg-white\/80, .dark .card, .dark .main-card {
  background: linear-gradient(111deg, rgba(37,38,72,0.89) 75%, rgba(70,62,143,0.84) 100%) !important;
  box-shadow: 0 8px 40px 0 #3c2f7659, 0 2px 12px #bb97f445;
  border-radius: 1.8rem !important;
  border: 1.7px solid #7e6cff40;
  backdrop-filter: blur(14px) saturate(1.07);
  transition: box-shadow .22s, background .33s;
}
.dark .rounded-2xl:hover, .dark .rounded-3xl:hover { box-shadow: 0 12px 52px #7f5be27c, 0 5px 18px #7b7de244; filter: brightness(1.09) saturate(1.13); }
@media (max-width:700px){
  .dark .rounded-2xl, .dark .rounded-3xl { background: rgba(36,36,70,.97) !important; border-radius: 1.12rem !important; }
}

/* Tabs */
.dark [role="tablist"] {
  background: linear-gradient(98deg, #252244 80%, #3a2d63 100%);
  border-radius: 1.2rem !important;
  box-shadow: 0 2px 16px #32216655;
}
.dark [role="tab"] { background: transparent !important; color:#e7dbfd !important; border:none; }
.dark [role="tab"][data-state="active"] {
  background: linear-gradient(90deg, #6f6ded 30%, #a573ff 100%) !important;
  color:#fff !important; border-radius: 1.7rem !important; font-weight: 800;
  box-shadow: 0 0 14px 2.5px #9d89ff99;
  text-shadow: 0 0 4px #e5dbff40;
}
.dark [role="tab"]:not([data-state="active"]):hover {
  background: linear-gradient(95deg, #393064 60%, #5e48b3 100%) !important;
  color:#dad2ff !important; transition:.18s;
}

/* Buttons */
.dark .bg-indigo-500, .dark .btn, .dark .button {
  background: linear-gradient(96deg, #6b46c1 50%, #44d6ff 120%) !important;
  color:#fff !important; font-weight: 800; border:none; border-radius:1.2rem;
  box-shadow: 0 2px 18px #54c6fa55; transition: box-shadow .19s, filter .14s;
}
.dark .btn:hover, .dark .button:hover { box-shadow: 0 6px 30px #79eaff, 0 0 6px #a98fff99; filter: brightness(1.13); }

.dark .btn-outline, .dark .button-outline {
  background: transparent !important; border: 2px solid #7264e5 !important; color:#ccbaff !important;
}
.dark .btn-outline:hover, .dark .button-outline:hover {
  background: linear-gradient(91deg, #393064 60%, #5748b3 100%) !important; color:#fff !important;
}

/* Badges */
.dark .badge, .dark .badge-secondary {
  background: linear-gradient(93deg, #2f366d 60%, #7a67e9 100%) !important;
  color:#ffe6ff !important; box-shadow: 0 1px 14px #5143a97a; border:0 !important; font-weight:800;
}
.dark .badge[data-variant="destructive"], .dark .bg-red-500 { background: linear-gradient(96deg, #ff4560 70%, #f26585 100%) !important; color:#fff !important; }
.dark .badge[data-variant="success"], .dark .bg-green-400 { background: linear-gradient(96deg, #13e97b 70%, #46ffcc 100%) !important; color:#002c1b !important; }

/* Header bar */
.dark .Header, .dark .toolbar, .dark .appbar, .dark .navbar {
  background: linear-gradient(95deg, #1e1a2c 60%, #463f75 100%) !important;
  border-bottom: 2.5px solid #382fa0; box-shadow: 0 2px 18px #32216633;
}
header.Header { border-radius: 0 !important; }
.dark header.Header { border-radius: 0 !important; }

/* Avatar */
.dark .avatar, .dark .rounded-full {
  border: 2.3px solid #67f8fd !important; box-shadow: 0 5px 19px 0 #67f8fd44;
  background: linear-gradient(90deg, #1e1a2c 90%, #463f75 100%) !important;
}

/* Recharts polish */
.dark .recharts-surface, .dark .recharts-wrapper { background: transparent !important; }
.dark .recharts-pie-label-text, .dark .recharts-tooltip-label, .dark .recharts-tooltip-item-list { fill:#b8c4ff !important; color:#d2f8ff !important; text-shadow:0 2px 8px #32226685; }
.dark .recharts-sector { filter: drop-shadow(0 0 10px #7b5bff99); stroke-width:3px; }

/* Scrollbar (dark) */
body.dark ::-webkit-scrollbar { width: 12px; background: #251c36; }
body.dark ::-webkit-scrollbar-thumb { background: linear-gradient(120deg, #6351ff 0%, #463cbf 100%); border-radius: 14px; border: 2.5px solid #2b2a45; }
body.dark ::-webkit-scrollbar-thumb:hover { background: #8573ff; }

/* Headings pop */
.dark .cardTitle, .dark .CardTitle, .dark .text-xl, .dark .text-lg {
  color: #cfc6ff !important; letter-spacing: .01em; text-shadow: 0 1.5px 12px #7b5bff29; font-weight: 800;
}

/* Separators and borders */
.dark .Separator, .dark .border, .dark .border-indigo-100, .dark .border-zinc-800 { border-color: #3a29a8 !important; }
/* === Finishing touches: borders === */
.dark .Separator,
.dark .border,
.dark .border-indigo-100,
.dark .border-zinc-800 { border-color: #3a29a8 !important; }

/* =========================================================
   BLOBS / DECOR
========================================================= */
@keyframes blob {
  0%,100% { transform: scale(1) translate(0,0); }
  50% { transform: scale(1.18) translate(30px,20px); }
}
.animate-blob { animation: blob 16s infinite cubic-bezier(.8,0,.2,1); }
.animation-delay-2000 { animation-delay: 2s; }

/* =========================================================
   STICKY TABS ON MOBILE (פחות גלילה)
========================================================= */
.tabs-sticky,
[role="tablist"].tabs-sticky {
  position: sticky;
  top: calc(env(safe-area-inset-top, 0px) + 56px);
  z-index: 11;
  background: color-mix(in oklab, hsl(var(--background)) 92%, transparent);
  backdrop-filter: blur(10px) saturate(1.1);
  padding: 6px;
  margin-top: -6px;
}
@media (max-width: 640px) {
  [role="tablist"] {
    overflow-x: auto;
    gap: .5rem;
  }
  [role="tablist"] > * { flex: 0 0 auto; }
  [role="tab"] { white-space: nowrap; }
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
}

/* =========================================================
   QUICK ACTIONS – zero overflow + compact
========================================================= */
.quick-actions .button,
.quick-actions button,
.quick-actions a {
  display: grid;
  grid-auto-flow: row;
  place-items: center;
  gap: .25rem;
  padding-block: .75rem !important;
  border-radius: 14px !important;
  text-align: center;
  overflow: hidden;
}
.quick-actions .button span,
.quick-actions button span,
.quick-actions a span {
  display:block;
  max-width: 100%;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  line-height: 1.05;
  font-size: .84rem;
}
@media (max-width:640px){
  .quick-actions .button span,
  .quick-actions button span,
  .quick-actions a span { font-size: .78rem; }
}

/* =========================================================
   PROFILE – compact spacing on mobile
========================================================= */
.profile-hero {
  border-radius: 1.5rem;
  padding: clamp(1rem, 2vw, 2.25rem);
}
.profile-hero .Achievements, .Achievements { row-gap:.4rem; }
@media (max-width:640px){
  .profile-hero { padding: 1rem 0.9rem 1rem; border-radius: 1.25rem; }
  .profile-hero .Avatar, .profile-hero .avatar { transform: scale(.92); }
}

/* Stats tiles */
.stat-card { padding: 1rem; }
.stat-card .text-3xl { font-size: 1.6rem; }
@media (max-width:640px){
  .stat-card { padding: .85rem; border-radius: 14px; }
  .stat-card .text-3xl { font-size: 1.35rem; }
}

/* Messages preview items */
.message-item {
  padding: .75rem .9rem;
}
.message-item .line-clamp-2 { -webkit-line-clamp: 2; }
@media (hover:hover){
  .message-item:hover { transform: translateY(-1px); }
}

/* =========================================================
   COURSE CARDS – clamp + buttons that never overflow
========================================================= */
.course-card { border-radius: 14px; box-shadow: var(--elev-1); }
.course-card .title { font-weight: 700; color: #4338ca; }
.course-card .title,
.course-card p,
.course-card .meta {
  word-break: break-word;
}
.course-card .title { display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient:vertical; overflow:hidden; }
.course-card .desc { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }

.course-card .actions a,
.course-card .actions button {
  border-radius: 16px !important;
  padding: .55rem .75rem !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  font-weight: 800;
  text-shadow: 0 1px 0 rgba(0,0,0,.08);
  overflow: hidden;
}
.course-card .actions svg { flex: 0 0 auto; }
.course-card .actions span { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

@media (max-width:640px){
  .course-card .actions a,
  .course-card .actions button { padding: .5rem .6rem !important; border-radius: 14px !important; }
}

/* =========================================================
   FULLCALENDAR – extra polish + type hints
========================================================= */
/* Base event (works even if inline styles קיימים): hover/press behavior */
.fc .fc-event {
  will-change: transform, box-shadow, filter;
  filter: saturate(1.02);
}
.fc .fc-event:active { transform: translateY(0) scale(.995); }

/* List view: make rows airy but compact on mobile */
.fc-list-table td, .fc-list-table th { vertical-align: middle; }
.fc .fc-list-event-graphic { transform: scale(1.1); }

/* Legend (מקרא) */
.calendar-legend {
  display:flex; flex-wrap:wrap; gap:.7rem 1.5rem;
}
.calendar-legend .item { display:flex; align-items:center; gap:.5rem; }
.calendar-legend .swatch { width: 14px; height: 14px; border-radius: 3px; }

/* Optional classes אם תוסיף classNames לפי סוג האירוע */
.fc .calendar-event.exam   { background: var(--gradient-exam) !important; color:#fff !important; border-color:#0ea5e9 !important; }
.fc .calendar-event.assign { background: var(--gradient-assignment) !important; color:#fff !important; border-color:#1e40af !important; }

/* =========================================================
   TIPPY – compact on mobile
========================================================= */
@media (max-width:640px){
  .tippy-box[data-theme~='light-border'] .tippy-content{ padding: 8px 9px; }
}

/* =========================================================
   TOAST (shadcn) – consistent with brand
========================================================= */
[data-sonner-toast] {
  border-radius: 14px !important;
  box-shadow: 0 14px 36px rgba(0,0,0,.18);
  border: 1px solid hsl(var(--border));
}
.dark [data-sonner-toast] {
  background: #0f1220 !important;
  border-color: #2b2f45 !important;
  color: #e7e9ff !important;
}

/* =========================================================
   FORMS (inputs/selects) – comfy & readable
========================================================= */
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="search"],
textarea,
select,
.shadcn-input,
.shadcn-select {
  border-radius: 12px !important;
  border: 1px solid hsl(var(--input)) !important;
  background: hsl(var(--card)) !important;
  padding: .6rem .8rem !important;
  box-shadow: inset 0 1px 0 rgba(2,6,23,.03);
}
input::placeholder, textarea::placeholder { color: hsl(var(--muted-foreground)); }

/* Focus */
input:focus, textarea:focus, select:focus {
  outline: none !important;
  box-shadow: 0 0 0 3px hsl(var(--ring) / .25) !important;
  border-color: hsl(var(--ring)) !important;
}

/* =========================================================
   HEADER / NAV
========================================================= */
.header-sticky {
  border-bottom: 1px solid hsl(var(--border));
}
.header-sticky .container { padding-block: .5rem; }

/* =========================================================
   SCROLLBARS (light)
========================================================= */
@media (pointer:fine) {
  :root ::-webkit-scrollbar { width: 12px; height: 12px; }
  :root ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #c7d2fe, #a5b4fc);
    border-radius: 10px;
    border: 2px solid #eef2ff;
  }
  :root ::-webkit-scrollbar-track { background: #f8fafc; }
}

/* =========================================================
   UTILITIES – micro helpers
========================================================= */
.truncate-1 { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.flex-center { display:flex; align-items:center; justify-content:center; }
.rtl\:ml-1 { margin-inline-start: .25rem; }
.rtl\:mr-1 { margin-inline-end: .25rem; }

/* Make any icon obey text size */
.icon-inline { width: 1em; height: 1em; }

/* =========================================================
   MOBILE COMPACT SPACING – reduce vertical rhythm
========================================================= */
@media (max-width:640px){
  .container { padding-inline: .75rem; }
  .rounded-3xl { border-radius: 1.25rem; }
  .shadow-2xl { box-shadow: 0 14px 38px rgba(2,6,23,.14), 0 2px 6px rgba(2,6,23,.04) !important; }
  .card-elev { box-shadow: 0 10px 28px rgba(2,6,23,.1) !important; }
  .p-10 { padding: 1rem !important; }
  .mb-10 { margin-bottom: 1rem !important; }
  .grid.gap-8 { gap: 1rem !important; }
}

/* =========================================================
   ACCESSIBILITY MODES (כבר הוגדרו) – תוספת קטנה לקישורים
========================================================= */
main.accessibility-highlight-links a:hover { text-decoration: underline !important; }

/* =========================================================
   SHADCN DIALOG / SHEET – rounded & responsive
========================================================= */
.DialogContent, .SheetContent, .dialog-content-improved {
  border-radius: 20px !important;
}
@media (max-width:640px){
  .DialogContent, .SheetContent { width: 96vw !important; margin: 0 auto !important; }
}

/* =========================================================
   AVATAR RING – subtle glow on hover
========================================================= */
.avatar-ring:hover::after { opacity:.55; filter: blur(12px); }

/* =========================================================
   PIE CHART (Recharts) – subtle labels on light
========================================================= */
.recharts-pie-label-text { fill: #334155; font-weight: 700; }
.recharts-tooltip-wrapper { filter: drop-shadow(0 8px 26px rgba(2,6,23,.18)); }

/* =========================================================
   END – keep this section last for easier overrides
========================================================= */
